$if(graphics)$
\usepackage{graphicx}
\usepackage{svg}
\usepackage{xstring}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother

% Redefine \includegraphics command to use \includesvg for SVG images
\let\oldincludegraphics\includegraphics
\renewcommand{\includegraphics}[2][]{%
  \def\svgextension{.svg}
  \StrRight{#2}{4}[\tempext]%
  \IfStrEq{\tempext}{\svgextension}{%
    \includesvg[#1]{#2}}{%
    \oldincludegraphics[#1]{#2}}}
$endif$
